!function(c){"use strict";var D="ht",e=c[D],o=Math,M=o.max,q=o.min,G=o.abs,n=o.atan2,y=(o.cos,o.sin,o.ceil),_=e.Default,i=_.getInternal(),p=e.List,x=i.Mat,d=i.getNodeRect,E=i.intersectionLineRect,L=_.getDistance,Y=_.setEdgeType,k="left",N="right",K="top",C="bottom",r="edge.type",A="edge.gap",s="edge.center",Z="edge.extend",Q=function(V,P){return d(V,P).width},g=function(p,R){return d(p,R).height},X=function(b,E){return i.getEdgeAgentPosition(b,E._40I,E.s("edge.source.position"),E.s("edge.source.offset.x"),E.s("edge.source.offset.y"),E.s("edge.source.anchor.x"),E.s("edge.source.anchor.y"))},j=function(H,$){return i.getEdgeAgentPosition(H,$._41I,$.s("edge.target.position"),$.s("edge.target.offset.x"),$.s("edge.target.offset.y"),$.s("edge.target.anchor.x"),$.s("edge.target.anchor.y"))},W=function(F,T){var Q=F.s(r),k=F.getEdgeGroup();if(k){var L=0;if(k.eachSiblingEdge(function(C){T.isVisible(C)&&C.s(r)==Q&&L++}),L>1)return F.s(A)*(L-1)/2}return 0},$=function(K,t){var T=K.s(r),U=K.isLooped();if(!K.getEdgeGroup())return U?K.s(A):0;var p,B=0,S=0,k=0;return K.getEdgeGroup().getSiblings().each(function(z){z.each(function(J){if(J._40I===K._40I&&J.s(r)==T&&t.isVisible(J)){var M=J.s(A);p?(S+=k/2+M/2,k=M):(p=J,k=M),J===K&&(B=S)}})}),U?S-B+k:B-S/2},l=function($,U){var g=U.s("edge.corner.radius");return _.toRoundedCorner($,g)};i.addMethod(e.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),Y("boundary",function(H,M,Z,K){K||(M=-M);var _,t=X(Z,H),N=j(Z,H),P=d(Z,H._40I),s=d(Z,H._41I),U=new x(n(N.y-t.y,N.x-t.x)),q=L(t,N),T=t.x,f=t.y;return _=U.tf(0,M),t={x:_.x+T,y:_.y+f},_=U.tf(q,M),N={x:_.x+T,y:_.y+f},_=E(t,N,P),_&&(t={x:_[0],y:_[1]}),_=E(t,N,s),_&&(N={x:_[0],y:_[1]}),{points:new p([t,N])}}),Y("ripple",function(f,k,g,e){e||(k=-k);var A=X(g,f),Z=j(g,f),O=L(A,Z),Q=q(f.s("edge.offset"),O/2),l=f.s("edge.ripple.size"),B=f.s("edge.ripple.length"),S=f.s("edge.ripple.both"),J=f.s(s),F=f.s("edge.ripple.elevation"),N=new p,P=f.s("edge.ripple.straight")?null:new p,h=new x(n(Z.y-A.y,Z.x-A.x));e||(F=-F),O-=2*Q,B>0&&(l=y(O/B));var v=O/l;P&&P.add(1);for(var T=0;l>T;T++)P&&P.add(3),0===T?N.add({x:Q+v*T,y:J?0:k}):N.add({x:Q+v*T,y:k}),N.add({x:Q+v*T+v/2,y:F+k}),S&&(F=-F);for(N.add({x:Q+O,y:J?0:k}),T=0;T<N.size();T++){var G=h.tf(N.get(T));G.x+=A.x,G.y+=A.y,N.set(T,G)}return{points:N,segments:P}}),Y("h.v",function(k,n,W){n=$(k,W);var E=new p,T=k.s(s),J=X(W,k),f=J.x,B=J.y,z=j(W,k),S=z.x,H=z.y,C=0,e=0,u=S-f,t=H-B;return T||(C=Q(W,k._40I)/2,e=g(W,k._41I)/2),u>=0&&0>=t?(E.add({x:f+C,y:B+n}),E.add({x:S+n,y:B+n}),E.add({x:S+n,y:H+e})):0>=u&&t>=0?(E.add({x:f-C,y:B+n}),E.add({x:S+n,y:B+n}),E.add({x:S+n,y:H-e})):u>=0&&t>=0?(E.add({x:f+C,y:B+n}),E.add({x:S-n,y:B+n}),E.add({x:S-n,y:H-e})):(E.add({x:f-C,y:B+n}),E.add({x:S-n,y:B+n}),E.add({x:S-n,y:H+e})),l(E,k)}),Y("v.h",function(e,O,d){O=$(e,d);var R=new p,u=e.s(s),B=X(d,e),L=B.x,G=B.y,T=j(d,e),i=T.x,y=T.y,h=0,_=0,N=i-L,z=y-G;return u||(h=Q(d,e._41I)/2,_=g(d,e._40I)/2),N>=0&&0>=z?(R.add({x:L+O,y:G-_}),R.add({x:L+O,y:y+O}),R.add({x:i-h,y:y+O})):0>=N&&z>=0?(R.add({x:L+O,y:G+_}),R.add({x:L+O,y:y+O}),R.add({x:i+h,y:y+O})):N>=0&&z>=0?(R.add({x:L-O,y:G+_}),R.add({x:L-O,y:y+O}),R.add({x:i-h,y:y+O})):(R.add({x:L-O,y:G-_}),R.add({x:L-O,y:y+O}),R.add({x:i+h,y:y+O})),l(R,e)}),Y("ortho",function(f,C,F){var h=new p,K=f.s(s),m=f.s("edge.ortho"),q=f._40I,O=f._41I,t=X(F,f),P=t.x,H=t.y,u=j(F,f),i=u.x,v=u.y,r=i-P,W=v-H,k=K?0:Q(F,q)/2,Y=K?0:g(F,q)/2,z=K?0:Q(F,O)/2,A=K?0:g(F,O)/2,x=(r-(k+z)*(r>0?1:-1))*m,n=(W-(Y+A)*(W>0?1:-1))*m;return G(r)<G(W)?r>=0&&0>=W?(h.add({x:P+C,y:H-Y}),h.add({x:P+C,y:H+n+C-Y}),h.add({x:i+C,y:H+n+C-Y}),h.add({x:i+C,y:v+A})):0>=r&&W>=0?(h.add({x:P+C,y:H+Y}),h.add({x:P+C,y:H+n+C+Y}),h.add({x:i+C,y:H+n+C+Y}),h.add({x:i+C,y:v-A})):r>=0&&W>=0?(h.add({x:P+C,y:H+Y}),h.add({x:P+C,y:H+n-C+Y}),h.add({x:i+C,y:H+n-C+Y}),h.add({x:i+C,y:v-A})):(h.add({x:P+C,y:H-Y}),h.add({x:P+C,y:H+n-C-Y}),h.add({x:i+C,y:H+n-C-Y}),h.add({x:i+C,y:v+A})):r>=0&&0>=W?(h.add({x:P+k,y:H+C}),h.add({x:P+x+C+k,y:H+C}),h.add({x:P+x+C+k,y:v+C}),h.add({x:i-z,y:v+C})):0>=r&&W>=0?(h.add({x:P-k,y:H+C}),h.add({x:P+x+C-k,y:H+C}),h.add({x:P+x+C-k,y:v+C}),h.add({x:i+z,y:v+C})):r>=0&&W>=0?(h.add({x:P+k,y:H+C}),h.add({x:P+x-C+k,y:H+C}),h.add({x:P+x-C+k,y:v+C}),h.add({x:i-z,y:v+C})):(h.add({x:P-k,y:H+C}),h.add({x:P+x-C-k,y:H+C}),h.add({x:P+x-C-k,y:v+C}),h.add({x:i+z,y:v+C})),l(h,f)}),Y("flex",function(e,C,N){var P=new p,v=e.s("edge.flex")+W(e,N),w=e.s(s),_=e._40I,T=e._41I,V=X(N,e),n=V.x,k=V.y,i=j(N,e),I=i.x,M=i.y,q=I-n,E=M-k,D=w?0:Q(N,_)/2,d=w?0:g(N,_)/2,Z=w?0:Q(N,T)/2,h=w?0:g(N,T)/2,F=q>0?v:-v,$=E>0?v:-v;return G(q)<G(E)?q>=0&&0>=E?(P.add({x:n+C,y:k-d}),P.add({x:n+C,y:k+$+C-d}),P.add({x:I+C,y:M-$+C+h}),P.add({x:I+C,y:M+h})):0>=q&&E>=0?(P.add({x:n+C,y:k+d}),P.add({x:n+C,y:k+$+C+d}),P.add({x:I+C,y:M-$+C-h}),P.add({x:I+C,y:M-h})):q>=0&&E>=0?(P.add({x:n+C,y:k+d}),P.add({x:n+C,y:k+$-C+d}),P.add({x:I+C,y:M-$-C-h}),P.add({x:I+C,y:M-h})):(P.add({x:n+C,y:k-d}),P.add({x:n+C,y:k+$-C-d}),P.add({x:I+C,y:M-$-C+h}),P.add({x:I+C,y:M+h})):q>=0&&0>=E?(P.add({x:n+D,y:k+C}),P.add({x:n+F+C+D,y:k+C}),P.add({x:I-F+C-Z,y:M+C}),P.add({x:I-Z,y:M+C})):0>=q&&E>=0?(P.add({x:n-D,y:k+C}),P.add({x:n+F+C-D,y:k+C}),P.add({x:I-F+C+Z,y:M+C}),P.add({x:I+Z,y:M+C})):q>=0&&E>=0?(P.add({x:n+D,y:k+C}),P.add({x:n+F-C+D,y:k+C}),P.add({x:I-F-C-Z,y:M+C}),P.add({x:I-Z,y:M+C})):(P.add({x:n-D,y:k+C}),P.add({x:n+F-C-D,y:k+C}),P.add({x:I-F-C+Z,y:M+C}),P.add({x:I+Z,y:M+C})),l(P,e)}),Y("extend.east",function(R,N,h){var c=new p,d=R.s(Z)+W(R,h),A=R.s(s),k=X(h,R),y=k.x+(A?0:Q(h,R._40I)/2),K=k.y,I=j(h,R),B=I.x+(A?0:Q(h,R._41I)/2),b=I.y,T=M(y,B)+d;return K>b?(c.add({x:y,y:K+N}),c.add({x:T+N,y:K+N}),c.add({x:T+N,y:b-N}),c.add({x:B,y:b-N})):(c.add({x:y,y:K-N}),c.add({x:T+N,y:K-N}),c.add({x:T+N,y:b+N}),c.add({x:B,y:b+N})),l(c,R)}),Y("extend.west",function(e,K,O){var c=new p,U=e.s(Z)+W(e,O),Y=e.s(s),g=X(O,e),H=g.x-(Y?0:Q(O,e._40I)/2),T=g.y,L=j(O,e),I=L.x-(Y?0:Q(O,e._41I)/2),D=L.y,h=q(H,I)-U;return T>D?(c.add({x:H,y:T+K}),c.add({x:h-K,y:T+K}),c.add({x:h-K,y:D-K}),c.add({x:I,y:D-K})):(c.add({x:H,y:T-K}),c.add({x:h-K,y:T-K}),c.add({x:h-K,y:D+K}),c.add({x:I,y:D+K})),l(c,e)}),Y("extend.north",function(Y,T,h){var N=new p,R=Y.s(Z)+W(Y,h),n=Y.s(s),d=X(h,Y),_=d.x,G=d.y-(n?0:g(h,Y._40I)/2),a=j(h,Y),v=a.x,z=a.y-(n?0:g(h,Y._41I)/2),w=q(G,z)-R;return _>v?(N.add({y:G,x:_+T}),N.add({y:w-T,x:_+T}),N.add({y:w-T,x:v-T}),N.add({y:z,x:v-T})):(N.add({y:G,x:_-T}),N.add({y:w-T,x:_-T}),N.add({y:w-T,x:v+T}),N.add({y:z,x:v+T})),l(N,Y)}),Y("extend.south",function(x,$,_){var P=new p,k=x.s(Z)+W(x,_),t=x.s(s),q=X(_,x),w=q.x,R=q.y+(t?0:g(_,x._40I)/2),D=j(_,x),Y=D.x,c=D.y+(t?0:g(_,x._41I)/2),h=M(R,c)+k;return w>Y?(P.add({y:R,x:w+$}),P.add({y:h+$,x:w+$}),P.add({y:h+$,x:Y-$}),P.add({y:c,x:Y-$})):(P.add({y:R,x:w-$}),P.add({y:h+$,x:w-$}),P.add({y:h+$,x:Y+$}),P.add({y:c,x:Y+$})),l(P,x)});var I=function($,U,r,b,F){if(b.sort(function(y,T){var v=y.getSourceAgent()===U?y.getTargetAgent():y.getSourceAgent(),Q=T.getSourceAgent()===U?T.getTargetAgent():T.getSourceAgent(),c=v.p(),p=Q.p();if(r===k||r===N){if(c.y>p.y)return 1;if(c.y<p.y)return-1}else{if(c.x>p.x)return 1;if(c.x<p.x)return-1}return _.sortFunc(y.getId(),T.getId())}),F){for(var X,O,z,h=$.getSourceAgent(),H=$.getTargetAgent(),w=0;w<b.size();w++){var o=b.get(w);o.getSourceAgent()===h&&o.getTargetAgent()===H||o.getTargetAgent()===h&&o.getSourceAgent()===H?(O||(O=new p),O.add(o,0)):O?(z||(z=new p),z.add(o)):(X||(X=new p),X.add(o))}b.clear(),X&&b.addAll(X),O&&b.addAll(O),z&&b.addAll(z)}var Y=b.indexOf($),G=b.size(),v=$.s(A);return{side:r,index:Y,size:G,offset:-v*(G-1)/2+v*Y}},R=function(e,f,k,Y,W){var A=f.s(r);return I(f,k,Y,k.getAgentEdges().toList(function(M){return e.isVisible(M)&&M.s(r)===A}),W)},H=function(A,R){var W=A.getSourceAgent()===R?A.getTargetAgent():A.getSourceAgent(),l=R.p(),P=W.p(),j=P.x-l.x,Z=P.y-l.y;return j>0&&G(Z)<=j?N:0>j&&G(Z)<=-j?k:Z>0&&G(j)<=Z?C:K},z=function(o,$,D){var W=$.s(r),v=H($,D);return I($,D,v,D.getAgentEdges().toList(function(B){return o.isVisible(B)&&B.s(r)===W&&H(B,D)===v}))},T=function(M,G){var s=M.getSourceAgent()===G,h=s?M.getTargetAgent():M.getSourceAgent(),U=G.p(),V=h.p();return s?U.y>V.y?K:C:U.x<V.x?N:k},w=function(O,f,Y){var c=f.s(r),i=T(f,Y);return I(f,Y,i,Y.getAgentEdges().toList(function(y){return O.isVisible(y)&&y.s(r)===c&&T(y,Y)===i}),i===N||i===C)},F=function(J,g){var V=J.getSourceAgent()===g,y=V?J.getTargetAgent():J.getSourceAgent(),Y=g.p(),R=y.p();return V?Y.x<R.x?N:k:Y.y>R.y?K:C},J=function(j,L,$){var v=L.s(r),f=F(L,$);return I(L,$,f,$.getAgentEdges().toList(function(U){return j.isVisible(U)&&U.s(r)===v&&F(U,$)===f}),f===N||f===C)},u=function(O,c,y){var B=O.getSourceAgent(),J=O.getTargetAgent(),P=B.getId()>J.getId(),h=P?J:B,I=P?B:J,H=h.p(),m=I.p(),U=y(c,O,h),S=y(c,O,I),D=O.s(s),u=D?0:Q(c,h)/2,b=D?0:Q(c,I)/2,F=D?0:g(c,h)/2,L=D?0:g(c,I)/2,r=U.offset,d=S.offset,$=U.side,x=S.side,e=new p;return $===K?(e.add({x:H.x+r,y:H.y-F}),e.add({x:H.x+r,y:m.y+d}),x===k?e.add({x:m.x-b,y:m.y+d}):e.add({x:m.x+b,y:m.y+d})):$===C?(e.add({x:H.x+r,y:H.y+F}),e.add({x:H.x+r,y:m.y+d}),x===k?e.add({x:m.x-b,y:m.y+d}):e.add({x:m.x+b,y:m.y+d})):$===k?(e.add({x:H.x-u,y:H.y+r}),e.add({x:m.x+d,y:H.y+r}),x===C?e.add({x:m.x+d,y:m.y+L}):e.add({x:m.x+d,y:m.y-L})):$===N&&(e.add({x:H.x+u,y:H.y+r}),e.add({x:m.x+d,y:H.y+r}),x===C?e.add({x:m.x+d,y:m.y+L}):e.add({x:m.x+d,y:m.y-L})),P&&e.reverse(),l(e,O)};Y("ortho2",function(H,O,a){var L,J,x=H.s(s),I=H.s("edge.ortho"),U=H.getSourceAgent(),w=H.getTargetAgent(),F=U.getId()>w.getId(),Y=F?w:U,W=F?U:w,y=Y.p(),f=W.p(),b=z(a,H,Y),v=z(a,H,W),E=x?0:Q(a,Y)/2,T=x?0:g(a,Y)/2,r=x?0:Q(a,W)/2,m=x?0:g(a,W)/2,P=new p,$=b.offset,h=v.offset,G=b.side;return G===N?(L=f.y>y.y?-$:$,J=y.x+E+(f.x-r-y.x-E)*I,P.add({x:y.x+E,y:y.y+$}),P.add({x:J+L,y:y.y+$}),P.add({x:J+L,y:f.y+h}),P.add({x:f.x-r,y:f.y+h})):G===k?(L=f.y>y.y?-$:$,J=y.x-E-(y.x-E-f.x-r)*I,P.add({x:y.x-E,y:y.y+$}),P.add({x:J-L,y:y.y+$}),P.add({x:J-L,y:f.y+h}),P.add({x:f.x+r,y:f.y+h})):G===C?(L=f.x>y.x?-$:$,J=y.y+T+(f.y-m-y.y-T)*I,P.add({x:y.x+$,y:y.y+T}),P.add({x:y.x+$,y:J+L}),P.add({x:f.x+h,y:J+L}),P.add({x:f.x+h,y:f.y-m})):G===K&&(L=f.x>y.x?-$:$,J=y.y-T-(y.y-T-f.y-m)*I,P.add({x:y.x+$,y:y.y-T}),P.add({x:y.x+$,y:J-L}),P.add({x:f.x+h,y:J-L}),P.add({x:f.x+h,y:f.y+m})),F&&P.reverse(),l(P,H)},!0),Y("flex2",function(G,Y,d){var J,h=G.getSourceAgent(),M=G.getTargetAgent(),V=h.getId()>M.getId(),W=V?M:h,D=V?h:M,x=W.p(),_=D.p(),B=z(d,G,W),j=z(d,G,D),f=G.s(s),o=G.s("edge.flex")+(B.size-1)/2*G.s(A),Z=f?0:Q(d,W)/2,O=f?0:g(d,W)/2,q=f?0:Q(d,D)/2,T=f?0:g(d,D)/2,S=new p,b=B.offset,X=j.offset,v=B.side;return v===N?(J=_.y>x.y?-b:b,S.add({x:x.x+Z,y:x.y+b}),S.add({x:x.x+Z+o+J,y:x.y+b}),S.add({x:_.x-q-o+J,y:_.y+X}),S.add({x:_.x-q,y:_.y+X})):v===k?(J=_.y>x.y?-b:b,S.add({x:x.x-Z,y:x.y+b}),S.add({x:x.x-Z-o-J,y:x.y+b}),S.add({x:_.x+q+o-J,y:_.y+X}),S.add({x:_.x+q,y:_.y+X})):v===C?(J=_.x>x.x?-b:b,S.add({x:x.x+b,y:x.y+O}),S.add({x:x.x+b,y:x.y+O+o+J}),S.add({x:_.x+X,y:_.y-T-o+J}),S.add({x:_.x+X,y:_.y-T})):v===K&&(J=_.x>x.x?-b:b,S.add({x:x.x+b,y:x.y-O}),S.add({x:x.x+b,y:x.y-O-o-J}),S.add({x:_.x+X,y:_.y+T+o-J}),S.add({x:_.x+X,y:_.y+T})),V&&S.reverse(),l(S,G)},!0),Y("extend.north2",function(n,c,P){var E=n.getSourceAgent(),f=n.getTargetAgent(),u=E.getId()>f.getId(),i=u?f:E,V=u?E:f,M=i.p(),o=V.p(),m=R(P,n,i,K),L=R(P,n,V,K,!0),Y=n.s(s),W=Y?0:g(P,i)/2,I=Y?0:g(P,V)/2,N=m.offset,O=L.offset,D=n.s(Z)+(m.size-1)/2*n.s(A),t=q(M.y-W,o.y-I)-D+(M.x<o.x?N:-N),j=new p;return j.add({x:M.x+N,y:M.y-W}),j.add({x:M.x+N,y:t}),j.add({x:o.x+O,y:t}),j.add({x:o.x+O,y:o.y-I}),u&&j.reverse(),l(j,n)},!0),Y("extend.south2",function(j,B,k){var F=j.getSourceAgent(),i=j.getTargetAgent(),_=F.getId()>i.getId(),J=_?i:F,$=_?F:i,N=J.p(),n=$.p(),Y=R(k,j,J,C),z=R(k,j,$,C,!0),E=j.s(s),x=E?0:g(k,J)/2,X=E?0:g(k,$)/2,c=Y.offset,T=z.offset,V=j.s(Z)+(Y.size-1)/2*j.s(A),a=M(N.y+x,n.y+X)+V+(N.x>n.x?c:-c),K=new p;return K.add({x:N.x+c,y:N.y+x}),K.add({x:N.x+c,y:a}),K.add({x:n.x+T,y:a}),K.add({x:n.x+T,y:n.y+X}),_&&K.reverse(),l(K,j)},!0),Y("extend.west2",function(n,e,r){var F=n.getSourceAgent(),m=n.getTargetAgent(),f=F.getId()>m.getId(),P=f?m:F,y=f?F:m,k=P.p(),o=y.p(),T=R(r,n,P,K),a=R(r,n,y,K,!0),g=n.s(s),b=g?0:Q(r,P)/2,L=g?0:Q(r,y)/2,V=T.offset,G=a.offset,j=n.s(Z)+(T.size-1)/2*n.s(A),i=q(k.x-b,o.x-L)-j+(k.y<o.y?V:-V),M=new p;return M.add({x:k.x-b,y:k.y+V}),M.add({x:i,y:k.y+V}),M.add({x:i,y:o.y+G}),M.add({x:o.x-L,y:o.y+G}),f&&M.reverse(),l(M,n)},!0),Y("extend.east2",function(T,i,d){var v=T.getSourceAgent(),Y=T.getTargetAgent(),q=v.getId()>Y.getId(),a=q?Y:v,H=q?v:Y,y=a.p(),B=H.p(),C=R(d,T,a,K),S=R(d,T,H,K,!0),G=T.s(s),h=G?0:Q(d,a)/2,W=G?0:Q(d,H)/2,O=C.offset,n=S.offset,$=T.s(Z)+(C.size-1)/2*T.s(A),L=M(y.x+h,B.x+W)+$+(y.y>B.y?O:-O),t=new p;return t.add({x:y.x+h,y:y.y+O}),t.add({x:L,y:y.y+O}),t.add({x:L,y:B.y+n}),t.add({x:B.x+W,y:B.y+n}),q&&t.reverse(),l(t,T)},!0),Y("v.h2",function(V,y,E){return u(V,E,w)},!0),Y("h.v2",function(W,h,y){return u(W,y,J)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);