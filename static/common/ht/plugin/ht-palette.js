!function(q,D,H){"use strict";var y="px",Z="0",r="innerHTML",I="className",Y=ht.Default,C=ht.Color,s=ht.Node,x="position",a="top",P="left",N=Y.animate,t=Y.getInternal(),p="width",Z="0",X="none",e="max-height",v="font",K="background",c="border-box",A="user-select",h="box-sizing",T="overflow",W=Y.isTouchable,t=Y.getInternal(),m=C.titleIconBackground,L=Y.scrollBarInteractiveSize,j=/msie 9/.test(q.navigator?q.navigator.userAgent.toLowerCase():""),U=null,O=function(){return document},G=function(C){return O().createElement(C)},o=function(){return G("div")},i=function(){var N=o(),H=N.style;return H.msTouchAction=X,H.cursor="default",W&&H.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",U),H.position="absolute",H.left=Z,H.top=Z,N},S=function(){return G("canvas")},B=function(){return document.body},E=function(y,k,d){y.style.setProperty(k,d,U)},g=function(T,k){T.style.removeProperty(k)},$=function(x,j,I){Y.def(ht.widget[x],j,I)},z=function(Z,e){Z.appendChild(e)},l=function(d,U){d.removeChild(U)},k=Y.eventListenerOptionsFalse,_=(Y.eventListenerOptionsTrue,function(c,w,D,E){c.addEventListener(w,D,E?k:k)});t.addMethod(Y,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:m,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:m}]},paletteTitleLabelColor:Y.labelSelectColor,paletteTitleLabelFont:Y.labelFont,paletteContentLabelFont:Y.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:Y.widgetTitleHeight,paletteTitleBackground:C.titleBackground,paletteTitleHoverBackground:C.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:H,paletteItemHoverBorderColor:C.highlight,paletteItemSelectBackground:C.highlight},!0);var f=".palette-item:hover{border: 1px solid "+Y.paletteItemHoverBorderColor+" !important}"+" .palette-header:hover{background: "+Y.paletteTitleHoverBackground+" !important}",M=document.createElement("style");W||(M.styleSheet?M.styleSheet.cssText=f:M.appendChild(O().createTextNode(f))),O().getElementsByTagName("head")[0].appendChild(M);var F=function(F){var k=this;k.$22h=F,k.addListeners()};Y.def(F,D,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var S=this;S.$36h&&B().removeChild(S.$36h),S.$23h=S.$24h=S.$25h=S.$35h=S.$36h=U},handle_touchstart:function(p){for(var c,x=this,$=x.$22h,z=p.target,b=$.sm(),R=$.dm(),r="palette-header",w="palette-header-tool",t="palette-item",C=!1,j=!1,Q=!1;z&&(z[I]||"").indexOf(r)<0&&(z[I]||"").indexOf(t)<0;)z=z.parentNode;if(z&&z[I].indexOf(w)>=0?C=!0:z&&z[I].indexOf(r)>=0?Q=!0:z&&z[I].indexOf(t)>=0&&(j=!0),Y.isLeftButton(p))if(x.$27h(p))x.$24h=Y.getClientPoint(p),x.$25h=$.ty();else if(C){Y.preventDefault(p),c=z.parentNode.$11h;var U=R.getDataById(c),W=U.s("tools")[z.toolIndex];W.action&&W.action.call($)}else if(Q){Y.preventDefault(p),c=z.$11h;var U=R.getDataById(c);U.isExpanded()?U.setExpanded(!1):U.setExpanded(!0)}else if(j){c=z.$11h;var P=R.getDataById(c);b.ss(P),$.handleDragAndDrop&&(Y.preventDefault(p),P.s("draggable")&&($.handleDragAndDrop(p,"prepare"),x.$35h=0)),P.s("draggable")||(Y.preventDefault(p),x.$24h=Y.getClientPoint(p),x.$25h=$.ty())}else Y.preventDefault(p),x.$24h=Y.getClientPoint(p),x.$25h=$.ty();else x.$26h(p)},handle_mousedown:function(t){this.handle_touchstart(t)},handle_mousewheel:function(y){this.handleScroll(y,y.wheelDelta/40,y.wheelDelta!==y.wheelDeltaX)},handle_DOMMouseScroll:function($){this.handleScroll($,-$.detail,1)},handleScroll:function(o,N,R){var j=this.$22h;Y.preventDefault(o),R&&j._41o()&&j.ty(j.ty()+20*N)},handle_mouseup:function(c){this.handle_touchend(c)},handle_touchend:function(B){var t=this;t.$37h(B),t.$26h(B)},handleWindowMouseUp:function(m){this.handleWindowTouchEnd(m)},handleWindowTouchEnd:function(p){var q=this;q.$37h(p),q.$26h(p)},$37h:function(l){var M=this,$=M.$22h;2===M.$35h&&(M.$35h=3,$.handleDragAndDrop(l,"end"))},handleWindowMouseMove:function(W){this.handleWindowTouchMove(W)},handleWindowTouchMove:function(F){var u=this,G=u.$22h,I=u.$23h,T=u.$24h,A=u.$25h,r=Y.getClientPoint(F),C=G._29I,H=u.$36h;if(1===u.$35h||2===u.$35h){if(u.$35h=2,G.handleDragAndDrop(F,"between"),W){var Z=F.touches[0];F=Z?Z:F.changedTouches[0]}H.style.left=F.pageX-parseInt(H.width)/2+y,H.style.top=F.pageY-parseInt(H.height)/2+y}else"p"===I?G.ty(A+r.y-T.y):"v"===I&&G.ty(A+(T.y-r.y)/C.height*G._59I)},handle_mousemove:function(P){this.handle_touchmove(P)},handle_touchmove:function(l){if(!Y.isDragging()&&Y.isLeftButton(l)){var L=this,t=L.$22h,U=L.$27h(l);if(L.$24h){if(!L.$23h){if(Y.getDistance(Y.getClientPoint(l),L.$24h)<2)return;L.$23h=U?"v":"p",Y.startDragging(L)}}else if(U)t._43o();else if(0===L.$35h){if(L.$35h=1,t.handleDragAndDrop(l,"begin"),W){var w=l.touches[0];l=w?w:l.changedTouches[0]}var i=L.$36h=new Image,r=t.$10h[t.sm().ld().getId()].querySelector(".image-box"),S=parseInt(r.style.width),z=parseInt(r.style.height);i.draggable=!1,i.src=r.toDataURL(),i.width=S,i.height=z,i.style.position="absolute",i.style.left=l.pageX-S/2+y,i.style.top=l.pageY-z/2+y,B().appendChild(i),Y.startDragging(L)}}},$27h:function(t){var J=this.$22h,S=J.getView(),Z=S.getBoundingClientRect(),z=J._29I,n=t.clientX-Z.left+S.scrollLeft;return J._41o()&&z.x+z.width-n<L}}),ht.widget.Palette=function(l){var J=this,e=J._view=t.createView(null,J);J.$9h={},J.$10h={},J.$4h={},J._29I={x:0,y:0,width:0,height:0},J._59I=0,J.dm(l?l:new ht.DataModel),e[I]="ht-widget-palette",J.$29h=new F(J),E(e,K,Y.paletteContentBackground),E(e,T,"auto"),E(e,h,c),E(e,"-moz-"+h,c),E(e,"-webkit-"+A,X),E(e,"-moz-"+A,X),E(e,"-ms-"+A,X),E(e,A,X),E(e,"position","absolute"),E(e,"overflow","hidden"),z(e,J._79O=i()),_(e,"dragstart",function(f){f.dataTransfer&&(f.dataTransfer.setData("Text","nodeid:"+f.target.$11h),f.dataTransfer.effectAllowed="all",J.$29h.$26h())})},$("Palette",D,{ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:Y.autoHideScrollBar,_scrollBarSize:Y.scrollBarSize,_scrollBarColor:Y.scrollBarColor,getViewRect:function(){return this._29I},ty:function(K){return K==U?this.getTranslateY():(this.setTranslateY(K),void 0)},setTranslateY:function($){if(this.$32h==U){var Z=this,M=Z.$33h($),i=Z.$30h;Z.$30h=M,Z.fp("translateY",i,M)}},getTranslateY:function(){return this.$30h},setLayout:function(W){var A,h,k=this,X=k._layout;k._layout=W,"smallicons"===W?A=h=20:"iconsonly"===W?A=h=50:(A=70,h=50),k.setItemImageWidth(A),k.setItemImageHeight(h),k.setItemImagePadding(4),k.fp("layout",X,W)},getDataAt:function(C){for(var O=C.target;O&&O.$11h==U;)O=O.parentNode;return O&&O.$11h!=U?this.getDataModel().getDataById(O.$11h):void 0},$20h:function(){var J=16;return W&&(J*=1.2),J},$19h:function(){return Y.paletteTitleHeight},$18h:function(){var Q=Y.paletteSeparatorWidth,k=Y.paletteTitleBackground,z=Y.paletteSeparatorColor||Y.brighter(k);return Q+y+" solid "+z},$17h:function(Z){E(Z,"cursor","pointer"),E(Z,"display","inline-block"),E(Z,"margin-right",(W?8:4)+y),E(Z,"vertical-align",a)},$1h:function(i){var A=this,f=o(),l=o(),m=G("span");f[I]="palette-header",E(f,x,"relative"),E(f,K,Y.paletteTitleBackground),E(f,"color",Y.paletteTitleLabelColor),E(f,a,Z),E(f,h,c),E(f,"-moz-"+h,c),E(f,"padding","0 5px 0 0"),E(f,"border-top",A.$18h()),E(f,p,"100%"),E(f,"cursor","pointer"),E(f,"white-space","nowrap"),E(f,T,"hidden"),E(f,v,Y.paletteTitleLabelFont),E(f,"line-height",A.$19h()+y),f.$11h=i.getId();var D=S(),O=A.$19h(),u=A.$20h();A.$17h(D),t.setCanvas(D,u,O),z(f,D);var F=i.s("tools");if(F)for(var B=0;B<F.length;B++){var P=S();A.$17h(P),t.setCanvas(P,u,O),P[I]="palette-header-tool palette-header-tool"+i.getId()+"-"+B,P.style.position="absolute",P.style.right=(u+10)*B+"px",P.toolIndex=B,z(f,P)}return D[I]="palette-toggle-icon-"+i.getId(),l[I]="palette-content",E(l,"max-height",0+y),E(l,v,Y.paletteContentLabelFont),E(l,T,"hidden"),l.$11h=i.getId(),A.$9h[i.getId()]=l,m[r]=i.getName(),E(m,v,Y.paletteTitleLabelFont),z(f,D),z(f,m),[f,l]},$2h:function(h){var m=this,d=m._layout,w=j&&h.s("draggable")?G("a"):o(),K=S(),M=o(),F=h.getName()||"",l=h.s("title")||h.getToolTip()||F,u=m._itemMargin;K[I]="image-box";var f=m.getItemImageWidth(),e=m.getItemImageHeight();return t.setCanvas(K,f,e),z(w,K),M[r]=F,M[I]="label-box","iconsonly"!==d&&z(w,M),w[I]="palette-item",E(w,"vertical-align",a),E(w,"cursor","pointer"),E(w,"border-radius",5+y),E(w,"border","1px solid transparent"),E(w,"text-align","center"),E(w,"display","inline-block"),E(w,"margin-left",u+y),E(w,"margin-top",u+y),E(w,"color",Y.paletteContentLabelColor),"smallicons"===d?(E(K,"vertical-align","middle"),E(w,"margin-left",2+y),E(w,"margin-top",2+y),E(w,"padding",2+y),E(w,"text-align",P),E(M,"display","inline-block"),E(M,"min-width",m.$21h+m._itemMargin+y)):"largeicons"===d&&(E(M,"max-width",f+y),E(M,"overflow","hidden")),w.$11h=h.getId(),l&&(w.title=l),h.s("draggable")&&!m.handleDragAndDrop&&(j?(w.href="#",E(w,"text-decoration",X)):w.draggable="true"),w},$16h:function(y,p,Z,X){var L=t.initContext(y);t.translateAndScale(L,0,0,1),L.clearRect(0,0,Z,Z);var T=(Z-X)/2;Y.drawStretchImage(L,Y.getImage(p),"fill",0,T,X,X),L.restore()},$15h:function(a){var M=this,p=a.getId(),e=M._view.querySelector(".palette-toggle-icon-"+p),B=a.isExpanded()?Y.paletteCollapseIcon:Y.paletteExpandIcon;if(e&&B){var u=M.$19h(),D=M.$20h();M.$16h(e,B,u,D)}},_drawToolsIcon:function(R){var i=this,v=R.s("tools");if(v)for(var E=0;E<v.length;E++){var r=i._view.querySelector(".palette-header-tool"+R.getId()+"-"+E),U=v[E].icon,Q=i.$19h(),B=i.$20h();i.$16h(r,U,Q,B)}},$14h:function(Z){var D=this,G=Z.getId(),B=D.$10h[G].querySelector(".image-box"),E=Z.getImage(),R=Z.s("image.stretch");if(B&&E){var q=t.initContext(B),f=D.getItemImagePadding();f="smallicons"===D._layout?f/2:f;var l=D.getItemImageWidth()-2*f,T=D.getItemImageHeight()-2*f;t.translateAndScale(q,0,0,1),q.clearRect(0,0,l,T),Y.drawStretchImage(q,Y.getImage(E),R,f,f,l,T,Z,D),q.restore()}},validateImpl:function(){var a,u,i,q=this,g=q.$9h,M=q._layout,p=q.$10h,W=q.$4h,E=q._view,t=q.dm();if(q.$13h&&(delete q.$13h,W={},t.each(function(m){W[m.getId()]=m})),"smallicons"===M)for(var o in W){var v=W[o];if(v instanceof s){var V=v.getName()||"",c=Y.getTextSize(Y.paletteContentLabelFont,V).width;q.$21h!=U&&q.$21h>c||(q.$21h=c)}}for(var o in W){i=W[o];var _,T;if(t.contains(i)){if(i instanceof ht.Group){var j,Q=q.$1h(i),d=p[i.getId()];d&&(j=d.nextSibling,l(E,j),l(E,d)),u=t.getSiblings(i).indexOf(i);var w=E.children[2*u]||q._79O;w&&w.parentNode?(E.insertBefore(Q[0],w),E.insertBefore(j||Q[1],w)):(E.appendChild(Q[0]),E.appendChild(j||Q[1])),p[i.getId()]=Q[0],a=g[i.getId()]=j||Q[1],T=i.$12h;var P=i.s("promptText");T||(i.$12h=G("div"),i.$12h[r]=P||"",T=i.$12h),0===i.getChildren().size()?a.contains(T)||z(a,T):a.contains(T)&&l(a,T)}else if(_=i.getParent()){var R=q.$2h(i),x=p[i.getId()];a=g[_.getId()],x&&l(x.parentNode,x),u=t.getSiblings(i).indexOf(i);var h=a.children[u];h?a.insertBefore(R,h):z(a,R),p[i.getId()]=R,q.$14h(i)}}else{var K=p[i.getId()],m=K.parentNode;if(i instanceof ht.Group){var B=K.nextSibling;l(E,K),l(E,B),delete g[i.getId()]}else l(m,K),0===m.children.length&&(_=t.getDataById(m.$11h),_&&(T=_.$12h,T&&!m.contains(T)&&z(m,T)));delete p[i.getId()]}}q.$4h={};var k=function(){var H=q._59I,J=0;q.$32h!=U&&(clearInterval(q.$32h),J=0,delete q.$32h),q.$32h=setInterval(function(){q.$31h(),H===q._59I?(J++,J>=2&&(clearInterval(q.$32h),delete q.$32h)):(J=0,H=q._59I)},30)};for(var D in g)if(a=g[D],i=t.getDataById(g[D].$11h),q.$15h(i),q._drawToolsIcon(i),i.isExpanded()){if(a.style.maxHeight===0+y){var O=a.scrollHeight+q._itemMargin+y;N(a).duration(200).set(e,O).set("padding-bottom",q._itemMargin+y).end(function(){return function(){k()}}(O))}else a.style.maxHeight=a.scrollHeight+y;a.style.paddingBottom=q._itemMargin+y}else a.style.maxHeight!==0+y&&N(a).duration(200).set(e,Z).set("padding-bottom",Z).end(function(){return function(){k()}}(a));q.$28h(),q.$31h()},$31h:function(){for(var Y=this,p=Y._view,R=0,X=p.children,z=0;z<X.length;z++){var C=X[z];C.className&&C.className.indexOf("palette-")>=0&&(R+=C.offsetHeight)}Y._59I=R,Y.$30h=Y.$33h(Y.ty());var d=Y.ty();p.scrollTop=-d,Y._29I={x:0,y:-d,width:p.clientWidth,height:p.clientHeight},E(Y._79O,a,-d+y),Y._93I()},$33h:function(X){var q=this,u=q._29I.height-q._59I;return u>X&&(X=u),X>0?0:Math.round(X)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(J){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(J.property)<0&&this.redraw(),"translateY"===J.property&&(this.iv(),this._43o())},findDataByName:function(q){for(var e=this.dm().getDatas(),h=0;h<e.size();h++){var u=e.get(h);if(u.getName()===q)return u}},setDataModel:function(l){var o=this,k=o._dataModel,x=o._selectionModel;k!==l&&(k&&(k.umm(o.$6h,o),k.umd(o.$8h,o),k.umh(o.$7h,o),x||k.sm().ums(o.$28h,o)),o._dataModel=l,l.mm(o.$6h,o),l.md(o.$8h,o),l.mh(o.$7h,o),x?x._21I(l):l.sm().ms(o.$28h,o),o.sm().setSelectionMode("single"),o.fp("dataModel",k,l))},$6h:function(Q){var R=this,u=R._view,U=Q.data,M=R.$4h;"add"===Q.kind?M[U.getId()]=U:"remove"===Q.kind?M[U.getId()]=U:"clear"===Q.kind&&(R.$10h={},R.$9h={},R.$4h={},u[r]=""),R.iv()},$7h:function(_){var C=this,S=_.data;C.$4h[S.getId()]=S,C.iv()},$8h:function(B){var T=this,n=B.data,Q=B.property;"expanded"===Q?T.iv():(T.$4h[n.getId()]=n,T.iv())},$28h:function(){var Z,d=this,f=d.sm(),F="palette-item",Q=f.ld();this.dm().each(function(q){Z=d.$10h[q.getId()],Z&&Z[I].indexOf(F)>=0&&(q===Q?E(Z,K,Y.paletteItemSelectBackground):g(Z,K))})}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);