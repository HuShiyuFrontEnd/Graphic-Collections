!function($,L){"use strict";var Z="ht",R=$[Z],d="innerHTML",M="className",B=null,X="px",o=R.Default,k=o.getInternal(),n="0",N=function(){return document},G=function(s){return N().createElement(s)},b=function(){return G("canvas")},E=function(W,j,q){W.style.setProperty(j,q,B)},e=function(b,E,N){o.def(R.widget[b],E,N)},S=function(H,R){H.appendChild(R)},t=function(c,u){c.removeChild(u)},H=o.eventListenerOptionsFalse,A=(o.eventListenerOptionsTrue,function(h,c,x,N){h.addEventListener(c,x,N?H:H)}),s=function(r,z,G,w){r.removeEventListener(z,G,w?H:H)},j=o.isTouchable;k.addMethod(o,{menuLabelFont:(j?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),R.widget.Menu=function(i){var u=this,d=u._view=k.createView(null,u),B=u.$1g=new R.widget.ContextMenu,v=G("ul");B._r=!0,B._view[M]+=" ht-widget-dropdownmenu",d[M]="ht-widget-menu",v[M]="header",E(d,"margin",n),E(d,"padding",n),E(d,"background",o.menuBackground),E(d,"-webkit-user-select","none"),E(d,"-moz-user-select","none"),E(d,"user-select","none"),E(d,"text-align","left"),E(d,"border-bottom",o.menuSeparatorWidth+"px solid "+o.menuSeparatorColor),E(d,"cursor","default"),E(d,"overflow","auto"),E(d,"white-space","nowrap"),E(d,"font",o.menuLabelFont),E(d,"color",o.menuLabelColor),E(d,"box-sizing","border-box"),E(d,"-moz-box-sizing","border-box"),E(v,"list-style","none"),E(v,"margin",n),E(v,"padding",n),E(v,"display","inline-block"),S(d,v),u.setItems(i),u.$2g=function(M){u.$3g(M)},u.$4g=function(S){u.$5g(S)},u.$6g=function(F){u.$7g(F)},u.$8g=function(v){u.$9g(v)},u.$9b=function(P){u.$10g(P)},u._autoShow=!0,u.setAutoShow(!1),B.afterHide=function(){u.$11g()},B.afterShow=function(){u.$12g()},s(N(),"keydown",B.$3b),u.$3b=function(J){u.$13g(J)},u.invalidate()},e("Menu",L,{_items:B,$14g:o.menuHoverBackground,$15g:o.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(i){var J=this;if(J.$21g=i,J.setItems(J._items),"largeicons"===i){for(var o=J._view.querySelectorAll(".header-item"),s=0,m=0;m<o.length;m++){var z=o[m];s=Math.max(s,z.clientWidth)}for(var m=0;m<o.length;m++){var z=o[m];E(z,"min-width",s+X)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(G){this.$22g=G;for(var i=this._view.querySelectorAll(".header-item"),g=0;g<i.length;g++){var o=i[g];E(o,"margin-left",G+X),E(o,"margin-right",G+X)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(G){this.$23g=G;for(var c=this._view.querySelectorAll(".header-item"),v=0;v<c.length;v++){var j=c[v];E(j,"margin-top",G+X),E(j,"margin-bottom",G+X)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(j){this.$24g=j,E(this._view,"text-align",j)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){var T=this,J=T._enableGlobalKey;J===!1&&(A(N(),"keydown",T.$3b),T._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,s(N(),"keydown",this.$3b)},setHoverBackground:function(Z){this.$14g=Z},setHoverColor:function(m){this.$15g=m},setItems:function(D){var t=this,R=t._view,$=t.$21g;if(t._items=D,R.children[0][d]="",t.$16g={},D&&D.length){for(var f=R.children[0],i=0,W=N().createDocumentFragment();i<D.length;i++){var B=D[i],j=G("li"),C=G("span");if(B.icon){var H=b();H[M]="menu-item-icon","smallicons"===$?(E(H,"height","1.2em"),E(H,"width","1.2em"),E(H,"vertical-align","middle")):(E(H,"height","32px"),E(H,"width","32px"),E(H,"display","block"),E(H,"margin","0 auto")),H.$20g=B.icon,S(j,H)}j[M]="header-item",E(j,"display","inline-block"),E(j,"vertical-align","top"),E(j,"padding","0 1.2em"),E(j,"line-height","1.8em"),"largeicons"===$&&E(j,"text-align","center"),E(j,"background-color","rgba(0,0,0,0)"),j.setAttribute("data-index",i),t.$16g[i]=B.items,C[d]=B.label,"iconsonly"!==$&&S(j,C),S(W,j)}S(f,W)}},showDropdownMenu:function(G){var V=this,v=V.$16g[G],J=V.$1g,d=V._view.children[0].children[G],p=V.$17g;if(d&&d!==p){p&&V.hideDropdownMenu();var $=d.getBoundingClientRect(),l=o.getWindowInfo();V.$17g=d,J.setItems(v),J.show($.left+l.left,$.top+$.height+l.top,!1)}},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(W,K){var w=this,a=w._items;return a&&0!==a.length?w.$1g.getItemByProperty(W,K,a):B},$12g:function(){var K=this,c=K.$17g;c.style.background=K.$14g,c.style.color=K.$15g,K._autoShow||A(N(),j?"touchstart":"mousedown",K.$9b)},$11g:function(){var Q=this,g=Q.$17g;g&&(g.style.background="",g.style.color="",Q.$17g=B),s(N(),j?"touchstart":"mousedown",Q.$9b)},$10g:function(V){var m=this,H=m._view,f=m.$1g,h=H.children[0];!N().body.contains(H)||h.contains(V.target)||f._view.contains(V.target)||m.hideDropdownMenu()},$13g:function(E){var C=this,U=C.$1g;N().body.contains(C._view)&&U.$13b.$4b.call(U.$13b,E,C._items)},setAutoShow:function(D){var S=this,Y=S.$1g,T=S._view;S._autoShow!==D&&(S._autoShow?(s(T,"mouseover",S.$2g),s(T,"mouseout",S.$4g),s(Y._view,"mouseout",S.$4g),j||(A(T,"mouseover",S.$8g),A(T,"mouseout",S.$8g)),A(T,j?"touchstart":"mousedown",S.$6g)):(s(T,"mouseover",S.$8g),s(T,"mouseout",S.$8g),s(T,j?"touchstart":"mousedown",S.$6g),s(N(),j?"touchstart":"mousedown",S.$9b),j||(A(T,"mouseover",S.$2g),A(T,"mouseout",S.$4g),A(Y._view,"mouseout",S.$4g))),S._autoShow=D)},$3g:function(L){var A=this,$=A._view.children[0],n=L.target;if($!==n&&$.contains(n)){for(;"header-item"!==n[M];)n=n.parentNode;A.showDropdownMenu(n.getAttribute("data-index"))}},$5g:function(L){var P=this,i=P._view.children[0],K=P.$1g,I=L.target,y=L.relatedTarget;!i.contains(I)&&!K._view.contains(I)||i.contains(y)||K._view.contains(y)||P.hideDropdownMenu()},$7g:function(l){l.preventDefault();var $=this,O=$._view.children[0],i=$.$1g,R=l.target;if(o.isLeftButton(l)&&O!==R&&O.contains(R))if(j){for(;"header-item"!==R[M];)R=R.parentNode;var S=R.getAttribute("data-index"),i=$.$1g,I=$._view.children[0].children[S],e=$.$17g;i.isShowing()&&$.hideDropdownMenu(),I!==e&&$.showDropdownMenu(S)}else if(i.isShowing())$.hideDropdownMenu();else{for(;"header-item"!==R[M];)R=R.parentNode;$.showDropdownMenu(R.getAttribute("data-index"))}},$9g:function(Z){var r=this,P=r._view,z=r.$1g,J=Z.target;if(P.contains(J)){for(var b=P.querySelectorAll(".header-item"),W=B,L=0;L<b.length;L++){var _=b[L];_.style.background="",_.style.color="","mouseover"===Z.type?_.contains(J)&&(W=_):"mouseout"===Z.type&&z.isShowing()&&r.$17g===_&&(W=_)}z.isShowing()&&(W||(W=r.$17g),r.showDropdownMenu(W.getAttribute("data-index"))),W&&(W.style.background=r.$14g,W.style.color=r.$15g)}},getShowingMenuIndex:function(){var U=this.$17g;return U?U.getAttribute("data-index"):-1},addTo:function(A){var r=this,i=r._view;S(A,i),r.invalidate()},dispose:function(){var R=this,n=R._view,T=R.$1g;n&&(R._autoShow?(s(n,"mouseover",R.$2g),s(n,"mouseout",R.$4g),s(T._view,"mouseout",R.$4g)):(s(n,"mouseover",R.$8g),s(n,"mouseout",R.$8g),s(n,j?"touchstart":"mousedown",R.$6g),s(N(),j?"touchstart":"mousedown",R.$9b)),s(N(),"keydown",R.$3b),T.dispose(),n.parentNode&&t(n.parentNode,n),R._view=R.$1g=R.$16g=R._items=R.$17g=R.$2g=R.$4g=R.$6g=R.$8g=R.$9b=R.$3b=B)},$19g:function(f,p,S,G){var A=k.initContext(f);k.translateAndScale(A,0,0,1),A.clearRect(0,0,S,G),o.drawStretchImage(A,o.getImage(p),"fill",0,0,S,G),A.restore()},validateImpl:function(){var S,Z,W,v=this,h=v._view,p=h.querySelectorAll(".menu-item-icon");for(W=0;W<p.length;W++){var e=p[W];S=e.clientWidth,Z=e.clientHeight,S&&Z&&(k.setCanvas(e,S,Z),v.$19g(e,o.getImage(e.$20g),S,Z))}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);