!function(y){"use strict";var q="ht",$=y[q],O=function(){return document},S=function(){return O().body},v=function(d,c,e){d.style.setProperty(c,e,null)},t=function(u){return O().createElement(u)},m=function(){return t("div")},j=function(){var X=t("canvas");return X},C=function(U,L){v(U,"-webkit-transform",L),v(U,"-ms-transform",L),v(U,"transform",L)},M=function(O,P){v(O,"-webkit-transform-origin",P),v(O,"-ms-transform-origin",P),v(O,"transform-origin",P)},o=function(d,y){d.appendChild(y)},u=function(X,c){X.removeChild(c)},K=y.parseInt,I=$.Default,w=I.eventListenerOptionsFalse,N=(I.eventListenerOptionsTrue,function(E,$,I,M){E.addEventListener($,I,M?w:w)}),f=I.getInternal(),Q=Math.PI,W="white-space",b="visibility",U="left",p="top",G="width",F="height",_="position",g="display",Z="z-index",R="px",e="0 0",s="absolute",k="visible",Y="hidden",x="none",r="block",T="nowrap",A="rgba(0, 0, 0, 0.005)";I.setImage("node_dragger","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAN9JREFUeNrsV9sNhDAMKyzQVdgARmGzrMJNUFZhAh6nfkVcG9PQgHSR8lEksJs6pnGuLCimSRzAa0yyBK9O4gy8GokU+O0kJOAwiQYg0LP1xNYDW3+0CfBYNb7VOuN4LAGpiOaYUhFDas9F2NPHDELNENJqaHgBgSQJ3ufakfQJqckERcOiK+Ae1FGWBNKGh9oX5WPpLpdNYfffijbsxTHh7VKP7388n1g1h7OKUoUuyGpJakQEuhwkZAKcDXVOdWcrOrL/feBVBHI/q8fcjE1nA9PpyHQ+NJ2Qi8A3AQYAOtS27fCoRY0AAAAASUVORK5CYII=");var c=$.graph.GraphView.prototype,X=c._42;c.adjustHtmlNodeIndex=!0,c._42=function(J,F){if(X.call(this,J,F),this.adjustHtmlNodeIndex)for(var s=this.getDataModel()._datas._as,k=s.length,q=1,T=0;k>T;T++){var $=s[T];if($ instanceof D){var L=this.getDataUI($);v(L.$2f,Z,q+""),v(L.$3f,Z,q+1+""),q+=2}}};var H=$.HtmlNodeUI=function(K,Z){var O=this;H.superClass.constructor.call(O,K,Z);var d=O.$2f=m(),o=O.$3f=j();v(d,_,s),v(d,b,Y),v(d,W,T),o.draggable=!1,v(o,_,s),v(o,g,x),M(o,e),N(d,"change",function(x){var z=x.target,V=z.bind||z.getAttribute("bind"),G=z.type&&"checkbox"===z.type?z.checked:z.value,E=Z.getContext();V&&E&&(E[V]=G,O.$4f=JSON.stringify(E))}),["mousedown","touchstart","keydown","mousewheel","DOMMouseScroll"].forEach(function(G){N(d,G,this.$9f.bind(this))},O)};I.def(H,f.ui().NodeUI,{_visible:!0,$11f:function(){var j=this,C=j.$3f,E=j._data,c=E.getDraggerImageWidth(),o=E.getDraggerImageHeight(),m=E.getDraggerImage(),Z=f.initContext(C);Z.beginPath(),f.setCanvas(C,c,o),f.translateAndScale(Z,0,0,1),Z.clearRect(0,0,c,o),I.drawImage(Z,I.getImage(m),0,0,c,o),Z.restore()},_80o:function(O){H.superClass._80o.call(this,O);var V=this,P=V._data,n=P._padding,$=2*n,E=V.$2f,h=V.$3f,z=V.gv,D=z.getZoom(),X=z.getTranslateX(),d=z.getTranslateY(),N=z.getView(),l=V._83o,t=P._width,y=P._height,W=l.position,S=l.rotation,J=(t-$)/P.$5f*D,e=(y-$)/P.$6f*D,j=V._html,B=P._html,q=P.getHtmlType();if("html"===q){var i=P.getContext()||{},f=V.$4f,T=P.$10f,L=JSON.stringify(i);j&&f&&j===B&&f===L||(V.$4f=L,V._html=B,E.innerHTML=T?T(i):B)}else if(null!=q){var c=P.getHtml();"ht"===q&&(c=c.getView()),j&&j===c&&E.contains(j)||(V._html=c,E.innerHTML="",o(E,c))}if(!E.parentNode){var M=z.$1f;if(!M){var u=m();v(u,_,s),v(u,Z,"0"),M=z.$1f=u;var I=z._canvas.nextSibling;I?N.insertBefore(u,I):o(N,u)}o(M,E),o(M,h),P.onContentInitialized&&P.onContentInitialized(E)}if(P._scalable){var w=P.$5f,a=P.$6f;C(E,"rotate("+180*(S/Q)+"deg) scale("+J+","+e+")"),v(E,G,""),v(E,F,""),v(E,U,(W.x-w/D/2)*D+X+R),v(E,p,(W.y-a/D/2)*D+d+R)}else{var Lk=K(E.style.width),ae=K(E.style.height),Mk=K((t-$)*D),Te=K((y-$)*D),Wf="100%",qd=E.children[0];v(qd,G,Wf),v(qd,F,Wf),(Lk!==Mk||ae!==Te)&&(v(E,G,Mk+R),v(E,F,Te+R),"ht"===q&&B.invalidate()),C(E,"rotate("+180*(S/Q)+"deg)"),v(E,U,(W.x-Mk/D/2)*D+X+R),v(E,p,(W.y-Te/D/2)*D+d+R)}var cm=V.dragRect;z.isMovable(P)&&z.isSelected(P)&&cm?(O.save(),O.fillStyle=A,O.fillRect(cm.x,cm.y,cm.width,cm.height),O.restore(),v(h,U,cm.x*D+X+R),v(h,p,cm.y*D+d+R),C(h,"scale("+D+","+D+")"),v(h,g,r),V.$11f()):v(h,g,x),v(E,b,this._visible?k:Y)},dispose:function(){var s=this.gv.$1f;this.$2f.parentNode===s&&s.removeChild(this.$2f),this.$3f.parentNode===s&&s.removeChild(this.$3f)},_84o:function(B){this._visible=B,v(this.$2f,b,B?k:Y),v(this.$3f,g,B?r:x)},_3O:function(){var X=this,z=X.gv,i=X._data;H.superClass._3O.call(X);var s=i.getRect();z.isEditable(i)&&(X.dragRect={x:s.x+s.width+i._padding,y:s.y+10,width:i.getDraggerImageWidth(),height:i.getDraggerImageHeight()},X._68o(X.dragRect))},rectIntersects:function(C){var M=this._79o();return $.Default.intersection(M,C)?!0:void 0},$9f:function(w){var B=this.gv,A=this._data;B.sm().contains(A)&&w.stopPropagation()}});var D=$.HtmlNode=function(){D.superClass.constructor.call(this)};$.Default.def(D,$.Node,{ms_ac:["html","context","scalable","padding","draggerImage","draggerImageWidth","draggerImageHeight"],_padding:$.Default.isTouchable?12:6,_image:null,_scalable:!0,_draggerImage:"node_dragger",_draggerImageWidth:20,_draggerImageHeight:20,setHtml:function(N){var M=this,i=M._html;M._html=N,"html"===M.getHtmlType()&&"Handlebars"in y&&(M.$10f=Handlebars.compile(N)),M.$13f(),M.fp("html",i,N)},setContext:function(G){var E=this,r=E._context;E._context=G,E.fp("context",r,G),E.$13f()},setScalable:function(P){var l=this,$=l._scalable;l._scalable=P,l.fp("scalable",$,P),l.$13f()},getHtmlType:function(){var q=this._html;return q?"string"==typeof q?"html":q.getView?"ht":"dom":null},$13f:function(){var P=this,i=P._html,E=P.$10f;if(i){var R=m(),w=!1,H=P.getHtmlType();if(v(R,_,s),v(R,W,T),v(R,b,Y),"html"===H?(R.innerHTML=E?E(P.getContext()||{}):i,w=!0):"ht"===H?(o(R,i.getView()),w=!0):"dom"===H&&(o(R,i),w=!0),w){var e=2*P._padding;o(S(),R),P.$5f=R.scrollWidth,P.$6f=R.scrollHeight,P._width=P.$5f+e,P._height=P.$6f+e,P._originWidth=P._width,P._originHeight=P._height,u(S(),R)}}},getUIClass:function(){return $.HtmlNodeUI}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);